<!DOCTYPE html>
<html>
    <link href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet" type="text/css" />
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>
    <script src="http://underscorejs.org/underscore.js"></script>
    <script src="https://fb.me/react-0.13.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.29/browser.js"></script>
    <title>Study</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container-page">
        <div id="react-study"></div>
    </div>
    <script type="text/babel" >
      const DataSample = React.createClass({
        getInitialState: function() {
            return {editing: false}
        },
        edit: function() {
            this.setState({editing: true});
        },
        save: function() {
            this.props.onChange(this.refs.newText.getDOMNode().value, this.props.index);
            this.setState({editing: false});
        },
        remove: function() {
            alert('delete Ok !!')
        },
        render: function(){
          return(
            <div className="demo-card-wide mdl-card mdl-shadow--2dp">
              <div className="mdl-card__title">
                <img src="https://www.designveloper.com/images/logo_orange.png"/>
                <h2 className="mdl-card__title-text">Welcome</h2>
              </div>
              <div className="mdl-card__supporting-text">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Mauris sagittis pellentesque lacus eleifend lacinia...
              </div>
              <div className="mdl-card__actions mdl-card--border">
                <a className="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                  Get Started
                </a>

              </div>
            </div>
          )
        }
      })
      const Study01_RenderData = React.createClass({
          render: function() {
              return (
                  <div className="mdl-grid">
                    <DynamicTitle name="1. Example Render Data" />
                    <DataSample />
                    <DataSample />
                    <DataSample />
                  </div>
                  );
              }
          });
      const DynamicTitle = React.createClass({
        render : function(){
          return (
            <h5 className ="custom-title">{this.props.name}</h5>
          )
        }
      })
      const Study02_MultipleComponents = React.createClass({
        keepData(data) {
          this.state.set({dataForm: data })
        },
        render :function(){
          return (
            <div class="allListStudy">
              <Study01_RenderData />
              <DynamicTitle name = "2. Using Multiple Components" />
              <div className="mdl-grid">
                <DataSample />
                <DataSample />
                <DataSample />
                <DataSample />
                <DataSample />
                <DataSample />
              </div>
              <DynamicTitle name = "3. Event" />
              <StudyEvent />
              <DynamicTitle name = "3. Form Data" />
              <Study03_Form />
              <DynamicForm />
              <DynamicTitle name = "4. API From Github" />
              <APIRenderStudy source="https://api.github.com/users/johnnypham" />
              <APIsub source="https://api.github.com/users/johnnypham/subscriptions" />
            </div>
          )
        }
      });
      const Study03_Form = React.createClass({
        getInitialState :function(){
           return  this.props = {
            username : 'this.state.username',
            passwordA : 'this.state.passwordA',
            password : 'this.state.password',
            email : 'this.state.email',
          }
        },
        handleUserChange :function(event){
          this.setState({username: event.target.value});
        },
        handleEmailChange :function(event){
          this.setState({email: event.target.value});
        },
        handlePasswordChange :function(event){
          this.setState({
            password: event.target.value,
            passwordA : ('a12bc'+event.target.value+'cb21a')
          });
        },
        save :function(event){
          alert('console sreen :D')
          console.log(this.state);
          this.props.getData(this.state);
        },
        render :function(){
          return (
            <div className="formcustom">
              <h5>Register Form</h5>
              <div className="mdl-textfield mdl-js-textfield">
                <input onChange={this.handleUserChange} className="mdl-textfield__input" type="text" id="username"/>
                <label className="mdl-textfield__label" for="username">User Name...</label>
              </div>
              <div className="mdl-textfield mdl-js-textfield">
                <input onChange={this.handleEmailChange} className="mdl-textfield__input" type="text" id="email"/>
                <label className="mdl-textfield__label" for="email">Email ...</label>
              </div>
              <div className="mdl-textfield mdl-js-textfield">
                <input onChange={this.handlePasswordChange} className="mdl-textfield__input" type="password" id="password"/>
                <label className="mdl-textfield__label" for="password">Password...</label>
              </div>
              <button onClick= {this.save} className="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">
                  Submit
              </button>
            </div>

          );
        }
      });
      const StudyEvent = React.createClass({
        demoEvent: function(){
            alert('Event click')
        },
        handleText: function(event){
          this.setState({textDemo: event.target.value});
          if(this.state){
            alert(this.state.textDemo);
          }

        },
        render : function(){
          return (
              <div>
                <div className="formcustom">
                  <button onClick={this.demoEvent} className="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">
                      click me !
                  </button>
                  <div className="mdl-textfield mdl-js-textfield">
                    <input onChange={this.handleText} className="mdl-textfield__input" type="text" id="textEvent"/>
                    <label className="mdl-textfield__label" for="textEvent">Password...</label>
                  </div>
                </div>
              </div>
          )
        }
      });
      const DynamicForm = React.createClass({
        render : function(props){
          return (
            <ul className="mdl-list">
                <li className="mdl-list__item">
                  <span className="mdl-list__item-primary-content">
                  <i className="material-icons mdl-list__item-icon">person</i>
                  User Name : {this.props.dataView}
              </span>
                </li>
                <li className="mdl-list__item">
                  <span className="mdl-list__item-primary-content">
                  <i className="material-icons mdl-list__item-icon">person</i>
                  Email Name : {this.props.email}
                </span>
                </li>
                <li className="mdl-list__item">
                  <span className="mdl-list__item-primary-content">
                  <i className="material-icons mdl-list__item-icon">person</i>
                  Password : {this.props.password}
                </span>
                </li>
              </ul>
          )
        }
      });
      const APIsub  = React.createClass({
        getInitialState: function() {
          return {
            nameSubscriptions: '',
            description: '',
            language:'',
            teams_url:'',
            html_url:'',
            contributors_url: '',
          };
        },
        componentDidMount: function() {
          this.serverRequest = $.get(this.props.source, function (result) {
            console.log(result);
            const dataSubscriptions = _.map(result, function(data){
              return {
                subscriptions: data.subscriptions,
                description: data.description,
                language:data.language,
                teams_url:data.teams_url,
                html_url:data.html_url,
                name: data.name,
              }
            });
            this.setState({
              subscriptionsAPI: dataSubscriptions
            });
          }.bind(this));
        },
        componentWillUnmount: function() {
          this.serverRequest.abort();
        },
        render: function(){
          if (this.state.subscriptionsAPI) {
            return (
              <div className="mdl-grid">
                  {this.state.subscriptionsAPI.map(function(result) {
                    return (
                      <div className="demo-card-wide github mdl-card mdl-shadow--2dp">
                        <div className="mdl-card__title">
                        <img src="https://www.designveloper.com/images/logo_orange.png"/>
                          <h2 className="mdl-card__title-text">{result.name}</h2>
                        </div>
                        <div className="mdl-card__supporting-text">
                          {result.description}
                        </div>
                        <div className="mdl-card__actions mdl-card--border">
                          <a href={result.html_url} className="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                            Get Started
                          </a>

                        </div>
                      </div>
                    );
                  })}
              </div>
            );
          }else{
            return (
              <div>loading</div>
            )
          };
        }
      });
      const APIRenderStudy = React.createClass({
        getInitialState: function() {
          return {
            userName: '',
            imgThumbnail: '',
            location:'',
            author:'',
            urlRedirect:'',
            company: '',
          };
        },
        componentDidMount: function() {
          this.serverRequest = $.get(this.props.source, function (result) {
            this.setState({
              userName: result.login,
              imgThumbnail: result.avatar_url,
              location:result.location,
              author:result.email,
              urlRedirect:result.html_url,
              company: result.company,
            });
          }.bind(this));
        },
        componentWillUnmount: function() {
          this.serverRequest.abort();
        },
        render: function(){
          return (
            <div className="demo-card-square mdl-card mdl-shadow--2dp">
              <div className="mdl-card__title mdl-card--expand">
                <h2 className="mdl-card__title-text">{this.state.userName}</h2>
              </div>
              <div className="mdl-card__supporting-text">
              <div>
                  <label>Location : </label> {this.state.location}
                </div>
                <div>
                <label>Author : </label> {this.state.author}
                </div>
                <div>
                  <label>Company : </label> {this.state.company}
                </div>
              </div>
              <div className="mdl-card__actions mdl-card--border">
                <a href={this.state.urlRedirect} className="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                  View Profile
                </a>
              </div>
            </div>

          )
        }
      });
      React.render(<Study02_MultipleComponents />, document.getElementById('react-study'));
    </script>
</body>
</html>
